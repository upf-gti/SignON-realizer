<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>LexGUI Examples</title>
    <link rel="stylesheet" href="../build/lexgui.css">    
    <style>
        iframe { border: none; }
        .lexexamplespanel {
            margin-left: 6px;
            margin-top: 6px;
        }
    </style>
</head>
    <body></body>
    <script src="../build/lexgui.js"></script>
    <script>

        // init library and get main area
        let area = LX.init();

        // split main area
        let [left,right] = area.split({sizes:["20%","80%"], resize: false});

        left.root.style.borderRight = "2px solid gray";
        left.addMenubar( m => {
            m.add( "Examples", () => {
                location.href = "../examples/";
            });
            m.add( "Docs v" + LX.version, (v, name) => {
                location.href = "../docs/";
            });
            m.setButtonIcon("Github", "fa-brands fa-github", () => {window.open("https://github.com/jxarco/lexgui.js/")}, { float: "left" });
        });

        let example_selected = "Asset View";
        let show_previews = true;

        const examples = [
            'Asset View',
            'Overlay Area',
            'Pocket Dialog',
            'Area Tabs'
        ];

        let panel = left.addPanel({ className: "lexexamplespanel" });
        fillExamples( panel );

        let iframe = document.createElement('iframe');
        iframe.id = iframe.name = 'viewer';
        iframe.src = "asset_view.html";
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        right.root.appendChild(iframe);

        right.addOverlayButtons([
                {
                    name: "View Source Code",
                    icon: "fa fa-code",
                    callback: (value, event) => { 
                        const tokens = iframe.src.split('/');
                        window.open("https://github.com/jxarco/lexgui.js/blob/master/examples/" + tokens[tokens.length - 1], '_blank')
                    }
                }
        ], { float: "htc" } );

        // **** **** **** **** **** **** **** **** **** **** **** **** 

        function fillExamples( panel ) {
            
            panel.clear();

            // panel.addCheckbox("Show previews", show_previews, v => {
            //     show_previews = v;
            //     fillExamples( panel );
            // } );

            for( let ex of examples )
            {
                const id = ex.replace(" ", "_").toLowerCase();
                const options = {
                    callback: function() {
                        iframe.src = id + ".html";
                    }
                };
                if( show_previews )
                    options.img = "previews/" + id + ".png";
                panel.addCard(ex, options);
            }
        }
    </script>
</html>