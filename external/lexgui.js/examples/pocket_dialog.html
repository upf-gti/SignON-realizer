<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>LexGUI PocketDialog Demo</title>
    <link rel="stylesheet" href="../build/lexgui.css">    
</head>
    <body></body>
    <script src="../build/lexgui.js"></script>
    <script>

        // init library and get main area
        let area = LX.init({ skip_default_area: true });

        const pocket_dialog = new LX.PocketDialog("Load Settings", p => {
            
            p.branch("Canvas");
            p.addColor("Background", "#b7a9b1");
            p.addText("Text", "Pocket Dialog Lexgui.js @jxarco", null, {placeholder: "e.g. ColorPicker", icon: "fa fa-font"});
            p.addColor("Font Color", [1, 0.1, 0.6], (value, event) => {
                console.log("Font Color: ", value);
            });
            p.addNumber("Font Size", 36, (value, event) => {
                console.log(value);
            }, { min: 1, max: 48, step: 1});
            p.addVector2("2D Position", [250, 350], (value, event) => {
                console.log(value);
            }, { min: 0, max: 1024 });

            p.branch("Project");
            p.addText("Name", "Lexgui.js");
            p.addButton(null, "Export");
            p.merge();
        }, { float: 'lt' } );

        const pocket_dialog_draggable = new LX.PocketDialog("Draggable Dialog", p => {
            
            p.branch("Canvas");
            p.addColor("Background", "#b7a9b1");
            p.addText("Text", "Pocket Dialog Lexgui.js @jxarco", null, {placeholder: "e.g. ColorPicker", icon: "fa fa-font"});
            p.addColor("Font Color", [1, 0.1, 0.6], (value, event) => {
                console.log("Font Color: ", value);
            });
            p.addNumber("Font Size", 36, (value, event) => {
                console.log(value);
            }, { min: 1, max: 48, step: 1});
            p.addVector2("2D Position", [250, 350], (value, event) => {
                console.log(value);
            }, { min: 0, max: 1024 });
            p.merge();
        }, { size: ["350px", null], draggable: true });

        // add canvas to left upper part
        var canvas = document.createElement('canvas');
        canvas.id = "mycanvas";
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        document.body.appendChild( canvas );

        function loop(dt) {
            
            var ctx = canvas.getContext("2d");

            // Get values from panel widgets (e.g. color value)
            ctx.fillStyle = pocket_dialog.panel.getValue('Background');

            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = pocket_dialog.panel.getValue('Font Size') + "px Monospace";

            ctx.fillStyle = pocket_dialog.panel.getValue('Font Color');

            const text = pocket_dialog.panel.getValue('Text');
            const pos_2d = pocket_dialog.panel.getValue('2D Position');
            ctx.fillText(text, pos_2d[0], pos_2d[1]);

            requestAnimationFrame(loop);
        }

        requestAnimationFrame(loop);
    </script>
</html>